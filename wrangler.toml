#:schema node_modules/wrangler/config-schema.json
name = "ghl-mcp-server"
main = "src/index.ts"
compatibility_date = "2025-03-14"
compatibility_flags = ["nodejs_compat"]

# Durable Objects for stateful MCP sessions
[durable_objects]
bindings = [
  { name = "GHL_MCP_AGENT", class_name = "GHLMcpAgent" }
]

[[migrations]]
tag = "v1"
new_sqlite_classes = ["GHLMcpAgent"]

# D1 Database for sub-account and token storage
[[d1_databases]]
binding = "GHL_DB"
database_name = "ghl-accounts"
database_id = "647917a2-ace2-4b98-a10f-f822c5678646"

# Environment variables (set via wrangler secret)
# GHL_API_KEY - Default/fallback Private Integration Token
# GHL_LOCATION_ID - Default/fallback Location ID
